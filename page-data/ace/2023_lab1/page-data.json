{
    "componentChunkName": "component---src-pages-ace-2023-lab-1-index-md",
    "path": "/ace/2023_lab1/",
    "result": {"pageContext":{"frontmatter":{"title":"IIB v10 Migration"},"relativePagePath":"/ace/2023_lab1/index.md","titleType":"page","MdxNode":{"id":"fb1fc9c7-cb2c-5b2f-83d7-eb360b52514e","children":[],"parent":"41777518-34d2-5999-bc46-6a8f04c9e654","internal":{"content":"---\ntitle: IIB v10 Migration\n---\n[Return to main lab page](../../acelabs/Overview/)\n\n---\n\n# 1. Introduction\n\nThe purpose of this LAB is to show how to migrate an IBM Integration Bus (IIB) v10 integration node (also known as Broker) into App Connect Enterprise v12\n\nPrerequsisites:\nYou need to have downloaded and installed App Connect Enterprise Toolkit v12.0.6 or later in your local workstation.\n\nYou can download it from:\n[https://www.ibm.com/docs/en/app-connect/12.0?topic=enterprise-download-ace-developer-edition-get-started]()\n\n## 2. Deploy the IIB V10 backup into AppConnect V12\n\nIn this section we use a backup that was extracted from an IIB v10 instance running on Windows. The mqsibackupbroker command was used to create the backup which is packeged in a zip file. We can grab the zip file and use it to generate the content for an AppConnect v12 deployment. For the purpose of this lab the backup file is already provided for you. You will not be extracting it from an existing instance of IIB.\n\nFor your reference, the following command was used:\n![](images/2_winbackup.png)\n\nDownload the backup file from [TESTNODE_Administrator_210825_083432.zip](./labfiles/TESTNODE_Administrator_210825_083432.zip) and save it to local folder in your workstation.\n\n1. Launch the App Connect Enterprise Toolkit.\n2. Open the App Connect Enteperprise console which is a pre-configured command shell environment that allows you to run App Connect configuration commands.\n\n   - On MacOS you can open it by clicking on IBM App Connect Enterprise in the menu bar while the Toolkit window is selected and clicking on Open IntegrationConsole.\n\n   ![](images/1_OpenConsoleMac.png)\n\n   - On Windows you can open it by clicking on the IBM App Connect Enterprise Console in the start menu.\n\n   ![](images/1_1_OpenConsoleWindows.png)\n3. Run the mqsiextractcomponents command passing the location of the backup file you downloaded. For example:\n\n`mqsiextractcomponents --backup-file /Users/rramos/Downloads/TESTNODE_Administrator_210825_083432.zip  --source-integration-node TESTNODE_Administrator --target-integration-node ACENODE1`\n\n![](images/4_extract.png)\n\n4. Start the newly created integration node by typing:\n\n`mqsistart ACENODE1`\n\n5. Switch to the ACE Toolkit window and expand the integration node which is on the bottom left panel. You should see that the ACENODE1 integration node was created and it already has applications and policies deployed to it.\n\n![](images/6_toolkitcontents.png)\n\n6. Expand the DefaultPolicies folder. You will see that 3 policies where created and deployed.\n\n![](images/7_policies.png)\n\nPolicies did not exist in IIB v10. Configuration options for some nodes and services where provided trough node-managed ConfigurableServices which no longer exist in ACE v12. The mqsiextractcomponents command automatically created policies for such configurations and stored them in the DefaultPolicies project. Because they are stored in the DefaultPolicies project node properties in the integration flows just need to reference them by name without needing to provide a policy project. This is taken care for you automatically by the migraton tool.\n\nIf you choose to do a parallel (new code deployment) migration then you will need to start from your v10 source code and import a copy/fork into ACE Toolkit v12. That source code will not be policiy-aware so will be missing the policies. You can created then from scratch by hand but it is also usefull to run the extract command and grab the auto generated policies from there.\n\nFile location varies depending it the target is an integation node or stand-alone integration server and if the former then varies per operating system type.\nFor example these are locations on macOS and Windows for an integration Node:\n\n![](images/8_policylocationMac.png)\n![](images/9_PolicyLocationWin.png)\n\nOn stand-alone integration server it will be located within the work directory of the integration server.\n\nSo far we have migrated the v10 Integration Node into a new V12 Integration node. Now we will pick a particular integation server from the v10 to a v12 stand-alone integation server.\n\nIntegration Nodes are typically used on traditional VM or Baremetal IIB/ACE deployments. Stand alone integration servers can be deployed in VMs as well but are more commonly used on containers.\n\n7. Stop the Integration node by running the following command in the ACE Intgration console:\n\n`mqsistop ACENODE1`\n\n8. Create a folder in your hard drive. This folder is called the work directory and will hold all configuration and runtime files for your integration server. In this example we called it defaultIS\n9. Run the mqsiextract components command again but now we will select the \"default\" integration server and deploy it to target working directory. Replace the target-work-directory parameter with the folder you previously created in your hard drive.\n\n`mqsiextractcomponents --backup-file /Users/rramos/Downloads/TESTNODE_Administrator_210825_083432.zip --source-integration-node TESTNODE_Administrator  --source-integration-server default --target-work-directory /Users/rramos/Documents/defaultIS`\n\n![](images/10_extractIS.png)\n\n11. Start the integration server by running the IntegrationServer command and passing the location of the work directory as a parameter;\n\n![](images/11_startIS.png)\n\nNote: You might get firewall warnings from your local OS. Click on allow connections to the integration server.\n\nYou might notice that is shows some errors because a windows folder used by a FileInputNode does not exist on your laptop. Later on we'll see can we can prevent these types of issues from happening.\n\n11. Switch back to the ACE Toolkit and right click on Integration Servers on bottom left panel to add your new Integration Server.\n\n![](images/12_connectToolkitIS.png)\n\n12. Type localhost as Host name and 7600 as port.\n\n![](images/13_connectToolkitparams.png)\n\n13. Expand the integration server. You should see the deployed content similarly as we saw while migrating the entire integration node.\n\n![](images/14_expandcontentsIS.png)\n\nDuring a migration project ideally we should check first for compatibility of the existing code with the new ACE version and new target deployment architecture as containers or CP4I. For this IBM provides IBM Transformation Advisor with a plugin to analyze IIB backups or BAR files and generate migration reports.\nWe will run transformation advisor against our IIB v10 backup to see what we might to change before deploying it into containers.\n\n14. Create another folder somewhere in your hard drive. This folder will hold the transformation advisor reports.\n15. Go back to the Integration Console and issue the following command to set up the environment variable that points it to the report folder location (replace the folder with yours):\n\n`export TADataCollectorDirectory=/Users/rramos/Documents/TADir`\n\n16. Run the following command to run Transfomation advisor passing the location of the backup file you downloaded as parameter:\n\n`TADataCollector ace run /Users/rramos/Downloads/TESTNODE_Administrator_210825_083432.zip`\n\n![](images/15_runTA.png)\n\n17. Navigate to the folder you created to store the reports and expand the contents.\n\n![](images/16_browserconentsTA.png)\n\n18. Double-click on the recommendations.html file:\n\n![](images/17_showreport.png)\n\nYou will see some recommendations. One of them, for example, is to not use local folders for your file input node (the error we where getting) but rather a network shared file system. This would make it be more container-friendly and portable.\n\n## Congratulations\n\nYou have completed the IIB to ACE migration lab.\n\n[Return to main lab page](/acelabs/Overview)\n","type":"Mdx","contentDigest":"42e866b4d241a226f41242f846f56947","owner":"gatsby-plugin-mdx","counter":1593},"frontmatter":{"title":"IIB v10 Migration"},"exports":{},"rawBody":"---\ntitle: IIB v10 Migration\n---\n[Return to main lab page](../../acelabs/Overview/)\n\n---\n\n# 1. Introduction\n\nThe purpose of this LAB is to show how to migrate an IBM Integration Bus (IIB) v10 integration node (also known as Broker) into App Connect Enterprise v12\n\nPrerequsisites:\nYou need to have downloaded and installed App Connect Enterprise Toolkit v12.0.6 or later in your local workstation.\n\nYou can download it from:\n[https://www.ibm.com/docs/en/app-connect/12.0?topic=enterprise-download-ace-developer-edition-get-started]()\n\n## 2. Deploy the IIB V10 backup into AppConnect V12\n\nIn this section we use a backup that was extracted from an IIB v10 instance running on Windows. The mqsibackupbroker command was used to create the backup which is packeged in a zip file. We can grab the zip file and use it to generate the content for an AppConnect v12 deployment. For the purpose of this lab the backup file is already provided for you. You will not be extracting it from an existing instance of IIB.\n\nFor your reference, the following command was used:\n![](images/2_winbackup.png)\n\nDownload the backup file from [TESTNODE_Administrator_210825_083432.zip](./labfiles/TESTNODE_Administrator_210825_083432.zip) and save it to local folder in your workstation.\n\n1. Launch the App Connect Enterprise Toolkit.\n2. Open the App Connect Enteperprise console which is a pre-configured command shell environment that allows you to run App Connect configuration commands.\n\n   - On MacOS you can open it by clicking on IBM App Connect Enterprise in the menu bar while the Toolkit window is selected and clicking on Open IntegrationConsole.\n\n   ![](images/1_OpenConsoleMac.png)\n\n   - On Windows you can open it by clicking on the IBM App Connect Enterprise Console in the start menu.\n\n   ![](images/1_1_OpenConsoleWindows.png)\n3. Run the mqsiextractcomponents command passing the location of the backup file you downloaded. For example:\n\n`mqsiextractcomponents --backup-file /Users/rramos/Downloads/TESTNODE_Administrator_210825_083432.zip  --source-integration-node TESTNODE_Administrator --target-integration-node ACENODE1`\n\n![](images/4_extract.png)\n\n4. Start the newly created integration node by typing:\n\n`mqsistart ACENODE1`\n\n5. Switch to the ACE Toolkit window and expand the integration node which is on the bottom left panel. You should see that the ACENODE1 integration node was created and it already has applications and policies deployed to it.\n\n![](images/6_toolkitcontents.png)\n\n6. Expand the DefaultPolicies folder. You will see that 3 policies where created and deployed.\n\n![](images/7_policies.png)\n\nPolicies did not exist in IIB v10. Configuration options for some nodes and services where provided trough node-managed ConfigurableServices which no longer exist in ACE v12. The mqsiextractcomponents command automatically created policies for such configurations and stored them in the DefaultPolicies project. Because they are stored in the DefaultPolicies project node properties in the integration flows just need to reference them by name without needing to provide a policy project. This is taken care for you automatically by the migraton tool.\n\nIf you choose to do a parallel (new code deployment) migration then you will need to start from your v10 source code and import a copy/fork into ACE Toolkit v12. That source code will not be policiy-aware so will be missing the policies. You can created then from scratch by hand but it is also usefull to run the extract command and grab the auto generated policies from there.\n\nFile location varies depending it the target is an integation node or stand-alone integration server and if the former then varies per operating system type.\nFor example these are locations on macOS and Windows for an integration Node:\n\n![](images/8_policylocationMac.png)\n![](images/9_PolicyLocationWin.png)\n\nOn stand-alone integration server it will be located within the work directory of the integration server.\n\nSo far we have migrated the v10 Integration Node into a new V12 Integration node. Now we will pick a particular integation server from the v10 to a v12 stand-alone integation server.\n\nIntegration Nodes are typically used on traditional VM or Baremetal IIB/ACE deployments. Stand alone integration servers can be deployed in VMs as well but are more commonly used on containers.\n\n7. Stop the Integration node by running the following command in the ACE Intgration console:\n\n`mqsistop ACENODE1`\n\n8. Create a folder in your hard drive. This folder is called the work directory and will hold all configuration and runtime files for your integration server. In this example we called it defaultIS\n9. Run the mqsiextract components command again but now we will select the \"default\" integration server and deploy it to target working directory. Replace the target-work-directory parameter with the folder you previously created in your hard drive.\n\n`mqsiextractcomponents --backup-file /Users/rramos/Downloads/TESTNODE_Administrator_210825_083432.zip --source-integration-node TESTNODE_Administrator  --source-integration-server default --target-work-directory /Users/rramos/Documents/defaultIS`\n\n![](images/10_extractIS.png)\n\n11. Start the integration server by running the IntegrationServer command and passing the location of the work directory as a parameter;\n\n![](images/11_startIS.png)\n\nNote: You might get firewall warnings from your local OS. Click on allow connections to the integration server.\n\nYou might notice that is shows some errors because a windows folder used by a FileInputNode does not exist on your laptop. Later on we'll see can we can prevent these types of issues from happening.\n\n11. Switch back to the ACE Toolkit and right click on Integration Servers on bottom left panel to add your new Integration Server.\n\n![](images/12_connectToolkitIS.png)\n\n12. Type localhost as Host name and 7600 as port.\n\n![](images/13_connectToolkitparams.png)\n\n13. Expand the integration server. You should see the deployed content similarly as we saw while migrating the entire integration node.\n\n![](images/14_expandcontentsIS.png)\n\nDuring a migration project ideally we should check first for compatibility of the existing code with the new ACE version and new target deployment architecture as containers or CP4I. For this IBM provides IBM Transformation Advisor with a plugin to analyze IIB backups or BAR files and generate migration reports.\nWe will run transformation advisor against our IIB v10 backup to see what we might to change before deploying it into containers.\n\n14. Create another folder somewhere in your hard drive. This folder will hold the transformation advisor reports.\n15. Go back to the Integration Console and issue the following command to set up the environment variable that points it to the report folder location (replace the folder with yours):\n\n`export TADataCollectorDirectory=/Users/rramos/Documents/TADir`\n\n16. Run the following command to run Transfomation advisor passing the location of the backup file you downloaded as parameter:\n\n`TADataCollector ace run /Users/rramos/Downloads/TESTNODE_Administrator_210825_083432.zip`\n\n![](images/15_runTA.png)\n\n17. Navigate to the folder you created to store the reports and expand the contents.\n\n![](images/16_browserconentsTA.png)\n\n18. Double-click on the recommendations.html file:\n\n![](images/17_showreport.png)\n\nYou will see some recommendations. One of them, for example, is to not use local folders for your file input node (the error we where getting) but rather a network shared file system. This would make it be more container-friendly and portable.\n\n## Congratulations\n\nYou have completed the IIB to ACE migration lab.\n\n[Return to main lab page](/acelabs/Overview)\n","fileAbsolutePath":"/Users/thomas/Documents/IBM/Projects/Internal/techjam/src/pages/ace/2023_lab1/index.md"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}